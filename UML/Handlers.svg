<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1522px" height="1341px" viewBox="-0.5 -0.5 1522 1341" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2022-06-06T10:30:46.643Z&quot; agent=&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.67 Safari/537.36&quot; etag=&quot;cfs-qdgaiMOfIB5LRTKA&quot; version=&quot;19.0.0&quot; type=&quot;google&quot;&gt;&lt;diagram id=&quot;HeAgrEs6_sm-YAZ6Y9ck&quot; name=&quot;Page-1&quot;&gt;7Vpbd9o4EP41nNN9yB5fwMAjBtLk7Mk2Z5Nut48KFrZaYXmNgLC/viNLvgkMhsbEyfbF2OPRaDTzSd9IpmOPF88fYxQFd8zDtGMZ3nPHnnQsy7SGA/gRkq2UOD1TCvyYeEopFzyQ/7ASGkq6Ih5elhQ5Y5STqCycsTDEM16SoThmm7LanNFyrxHy8Y7gYYborvQL8XggpQOrn8tvMPGDtGfTGco3C5Qqq5EsA+SxTUFkTzv2OGaMy7vF8xhTEbw0LrLddcXbzLEYh7xOg2vXItcWC+/H7l/RdPzNf/w2uVJW1oiu1IA7lkPBnhvAK8cXd52J0RlOxdU1OxOzMzCSeyOVwHWayK3k2k8kg+Q6UvfKJjhXMCujwrdpqDl+TjrmCwoCE26XPGbf8ZhRFoMkZCFounNCqSZaRmhGQh8EvfzpkUUguIKo2O4mIBw/gFx0tQGkgoytcTynSUYC4nk4BFnMVqGHRcCMzENQA88qg25mqYQ5gNkC83gLKqpBVyV/W37c5FAyh0oWFGGUggYp+PqZ5TzDcKOSfELCrcqER6VsOP+uBDDdBYp9AqEZwdtu9AxXI7uKCBkia1eIEl8pzSAyOJbvKAnxVTou8dL83UrepNZzLEgfSEGAFiJLdPfpVnQwF7lMxeUmJYsQJKL38hTvSFLB7W0YrfgNCj2K44KNJ70FyCJdFsQihOkSlo7RrB7u8ZAbWshlEqqC260IrlD/iPmfkKoPv0nlvQMtBka0eVBtSsrKwJoBzg4E45Jj+xTesdUST9gmzMY3ZosFONwyF+9g1Wm5i5+j9jr4JcCYtte9P/C23RgEB4vp/XTAPY2cBQsSKItGcqWfcMGurlr3JxTPeZlSBUsLsmYhV0Wdaanna7QgVBDiDaZrLKyWWf8FaNe0eyXeNe26xDtsinjtc4lXMq18vErCPpIAKDFvgXar2CYnucJq7qIlfm2eK41QQmmUYnw/ksOkVKzksXY6LZ10txM8RyvK660S72oa2oOa07CxWdjbMwu1EOPQG4mNIzx5BC1Y6D0GIuMuvLhOwplsDuBJRdTqlgNX3kRgD/aTyjqLecB8FiI6zaUq0ELvcJjBS7aKZ/h4dc8BlZgfW4x201ZMi6NSEGOKOFmXfduXF2XunhHwOoOA7ZQhYNlaauWYVKvi9lUz1LOOGJKD3jEEuUTbglokFJbVDg+0blS3VW5p6t2yOtzI/nPEZuE+H8TOSSB+omz2HWDmoWWQoNI8gOVkdajE8gsi1a6JVOtiSO2a2mKl78FrI7V/xFAFUl8KHv32VBp/E7y5h1WvTbvq04l7rUah+Dod1E+U9af7sOSIY+lA2v9DIrqkE1GM18ke8R/pCRQZ6LJhyDz4WtOD10VP1XnTO6rx+uUTzl5/T4nn7NtpmU3VeIOz6LHAgc4OQbajuuu3rrqztOqud25117WOGGqYM4ft4cwJXkKjt8+YYrwZXx7emzfJljKcR7nyF080zBPWUJvhdYli0BRPpAT0ipO+Td+7SOi7K0K9t7jefF7ifK0shW7npLMQsw97PmW96znY0z5HZ2dvhTmYfaMuzsF+Y3Nw3x8QLnKWcdHKLV1qWnTcYWvrcZb3k487ekcMNVy6mdZ7rfeHrav3ddD09E1cXdDohro1QXPqaa6tncX19D9J6Rsa2zik38x5rtmib4OyXJYl+/9qD/JrA9B08WHW2AD09xQfTmPFR/e9ModZ9/PK5ajDMbQVX//GW5c6dgzV/LxyKnU4xkEqaAl1nPZB+83Wz3XxbBqdSwFar3u759ZCffOIobMLaHjM/18u1fN/6dvTHw==&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><rect x="20" y="40" width="380" height="240" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 182px; height: 1px; padding-top: 10px; margin-left: 15px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 130px; overflow: hidden;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><h1>Обработчики</h1></div></div></div></foreignObject><text x="15" y="22" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">Обработчики</text></switch></g><rect x="210" y="220" width="380" height="380" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-width="2" pointer-events="all"/><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 192px; height: 190px; padding-top: 110px; margin-left: 105px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left; width: 190px; height: 190px; overflow: hidden;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; width: 100%; height: 100%; white-space: nowrap;"><p style="margin: 4px 0px 0px; text-align: center; line-height: 1.2;"><i>&lt;&lt;Interface&gt;&gt;</i><br /><b>IInputHandler</b></p><hr size="1" /><p style="margin: 0px 0px 0px 4px; line-height: 1.4;">+ GetNext(): IInputHandler<br />+ SetNext(IInputHandler): void</p><p style="margin: 0px 0px 0px 4px; line-height: 1.4;">+ OnMouseDown(): ICommand</p><p style="margin: 0px 0px 0px 4px; line-height: 1.4;">+ OnMouseMove(): ICommand</p><p style="margin: 0px 0px 0px 4px; line-height: 1.4;">+ OnMouseUp(): ICommand</p><p style="margin: 0px 0px 0px 4px; line-height: 1.4;">+ OnWheel(): ICommand</p><p style="margin: 0px 0px 0px 4px; line-height: 1.4;">+ OnKeyDown(): ICommand</p><p style="margin: 0px 0px 0px 4px; line-height: 1.4;">+ OnKeyUp(): ICOmmand</p></div></div></div></foreignObject><text x="105" y="122" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">&lt;&lt;Interface&gt;&gt;...</text></switch></g><rect x="210" y="720" width="380" height="180" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-width="2" pointer-events="all"/><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 192px; height: 90px; padding-top: 360px; margin-left: 105px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left; width: 190px; height: 90px; overflow: hidden;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; width: 100%; height: 100%; white-space: nowrap;"><p style="margin:0px;margin-top:4px;text-align:center;"><b>InputHandlerBase</b></p><hr size="1" /><p style="margin:0px;margin-left:4px;">+ next: IInputHandler</p><hr size="1" /><p style="margin:0px;margin-left:4px;">+ HandleByDefault(): ICommand</p></div></div></div></foreignObject><text x="105" y="372" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">InputHandlerBase...</text></switch></g><path d="M 210 410 L 110 410 L 110 810 L 158.03 810" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 208.03 810 L 183.03 824.71 L 158.03 810 L 183.03 795.29 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><path d="M 400 720 L 400 628.24" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="6 6" pointer-events="stroke"/><path d="M 400 602.24 L 413 628.24 L 387 628.24 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><rect x="80" y="1100" width="320" height="220" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-width="2" pointer-events="all"/><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 162px; height: 110px; padding-top: 550px; margin-left: 40px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left; width: 160px; height: 110px; overflow: hidden;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; width: 100%; height: 100%; white-space: nowrap;"><p style="margin:0px;margin-top:4px;text-align:center;"><b>ViewPortInputHandler</b></p><hr size="1" /><p style="margin:0px;margin-left:4px;">+ viewPort: IViewPort</p><p style="margin:0px;margin-left:4px;">+ state: ViewPortState</p><p style="margin:0px;margin-left:4px;">+ prevMouseX: float</p><p style="margin:0px;margin-left:4px;">+ prevMouseY: float</p><hr size="1" /><p style="margin:0px;margin-left:4px;"><br /></p></div></div></div></foreignObject><text x="40" y="562" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">ViewPortInputHandler...</text></switch></g><path d="M 240 1100 L 240 1000 L 400 1000 L 400 936.24" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 400 902.24 L 417 936.24 L 383 936.24 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><rect x="530" y="1100" width="320" height="160" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-width="2" pointer-events="all"/><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 162px; height: 80px; padding-top: 550px; margin-left: 265px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left; width: 160px; height: 80px; overflow: hidden;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; width: 100%; height: 100%; white-space: nowrap;"><p style="margin:0px;margin-top:4px;text-align:center;"><b>DesignInputHandler</b></p><hr size="1" /><p style="margin:0px;margin-left:4px;">+ viewer: IViewer</p><p style="margin:0px;margin-left:4px;">+ state: DesignState</p><hr size="1" /><p style="margin:0px;margin-left:4px;"><br /></p></div></div></div></foreignObject><text x="265" y="562" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">DesignInputHandler...</text></switch></g><rect x="1020" y="340" width="480" height="140" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-width="2" pointer-events="all"/><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 242px; height: 70px; padding-top: 170px; margin-left: 510px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left; width: 240px; height: 70px; overflow: hidden;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; width: 100%; height: 100%; white-space: nowrap;"><p style="margin:0px;margin-top:4px;text-align:center;"><i>&lt;&lt;Interface&gt;&gt;</i><br /><b>IInputHandlingBuilder</b></p><hr size="1" /><p style="margin:0px;margin-left:4px;">+ UseHandler&lt;InputHandlerBase&gt;(): void<br /></p></div></div></div></foreignObject><text x="510" y="182" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">&lt;&lt;Interface&gt;&gt;...</text></switch></g><path d="M 1020 410 L 618.24 410" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="6 6" pointer-events="stroke"/><path d="M 592.24 410 L 618.24 397 L 618.24 423 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><path d="M 690 1100 L 690 1000 L 400 1000 L 400 936.24" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 400 902.24 L 417 936.24 L 383 936.24 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><rect x="970" y="1100" width="340" height="120" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-width="2" pointer-events="all"/><g transform="translate(-0.5 -0.5)scale(2)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 172px; height: 60px; padding-top: 550px; margin-left: 485px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left; width: 170px; height: 60px; overflow: hidden;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; width: 100%; height: 100%; white-space: nowrap;"><p style="margin:0px;margin-top:4px;text-align:center;"><b>DesignViewerInputHandler</b></p><hr size="1" /><p style="margin:0px;margin-left:4px;">+ viewer: IViewer</p><hr size="1" /><p style="margin:0px;margin-left:4px;"><br /></p></div></div></div></foreignObject><text x="485" y="562" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">DesignViewerInputHandler...</text></switch></g><path d="M 1140 1100 L 1140 1000 L 400 1000 L 400 936.24" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 400 902.24 L 417 936.24 L 383 936.24 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><path d="M 1140 1100 L 1140 790 L 1260 790 L 1260 508.24" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="6 6" pointer-events="stroke"/><path d="M 1260 482.24 L 1273 508.24 L 1247 508.24 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>